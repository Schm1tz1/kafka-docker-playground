# JDBC SAP HANA Source connector



## Objective

Quickly test [JDBC Sap Hana Source](https://docs.confluent.io/current/connect/kafka-connect-jdbc/source-connector) connector.


## How to run

Simply run:

```
$ playground run -f sap-hana-source<tab>
```

## Details of what the script is doing

Create table in SAP HANA:

```bash
docker exec -i sap /usr/sap/HXE/HDB90/exe/hdbsql -i 90 -d HXE -u LOCALDEV -p Localdev1  > /tmp/result.log  2>&1 <<-EOF
CREATE COLUMN TABLE CUSTOMERS(ID BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY,FIRST_NAME VARCHAR(30),LAST_NAME VARCHAR(30));
INSERT INTO CUSTOMERS(FIRST_NAME,LAST_NAME) VALUES ('John','Doe');
EOF
```

Creating SAP HANA JDBC Source connector:

```bash
curl -X PUT \
     -H "Content-Type: application/json" \
     --data '{
               "tasks.max": "1",
               "connector.class": "io.confluent.connect.jdbc.JdbcSourceConnector",
               "mode": "incrementing",
               "table.whitelist": "CUSTOMERS",
               "incrementing.column.name": "ID",
               "connection.url": "jdbc:sap://sap:39041/?databaseName=HXE&reconnect=true&statementCacheSize=512",
               "connection.user": "LOCALDEV",
               "connection.password" : "Localdev1",
               "topic.prefix": "sap-hana-"
          }' \
     http://localhost:8083/connectors/jdbc-sap-hana-source/config | jq .
```

sleep 5

Verifying topic sap-hana-CUSTOMERS:

```bash
playground topic consume --topic sap-hana-CUSTOMERS --min-expected-messages 1
```

Results:

```json
{"ID":{"long":1},"FIRST_NAME":{"string":"John"},"LAST_NAME":{"string":"Doe"}}
```

N.B: Control Center is reachable at [http://127.0.0.1:9021](http://127.0.0.1:9021])
